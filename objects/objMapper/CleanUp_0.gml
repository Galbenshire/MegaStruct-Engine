if (surface_exists(mapSurface))
    surface_free(mapSurface);
time_source_destroy(mapSurfaceUpdater);
